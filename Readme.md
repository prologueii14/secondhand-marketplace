# ğŸ›’ äºŒæ‰‹äº¤æ˜“å¸‚å ´ DApp

åŸºæ–¼ä»¥å¤ªåŠæ™ºèƒ½åˆç´„çš„äºŒæ‰‹å•†å“äº¤æ˜“å¹³å°ï¼Œå…·å‚™ Escrowï¼ˆæ‰˜ç®¡ï¼‰æ©Ÿåˆ¶ä¿éšœè²·è³£é›™æ–¹æ¬Šç›Šã€‚

## ğŸ“‹ å°ˆæ¡ˆç°¡ä»‹

é€™æ˜¯ä¸€å€‹å»ä¸­å¿ƒåŒ–çš„äºŒæ‰‹äº¤æ˜“å¸‚å ´ï¼Œè³£å®¶å¯ä»¥ä¸Šæ¶å•†å“ï¼Œè²·å®¶ä»˜æ¬¾å¾Œè³‡é‡‘æœƒé€²å…¥æ™ºèƒ½åˆç´„æ‰˜ç®¡ï¼Œç›´åˆ°è²·å®¶ç¢ºèªæ”¶è²¨å¾Œæ‰æœƒé‡‹æ”¾çµ¦è³£å®¶ï¼Œç¢ºä¿äº¤æ˜“å®‰å…¨ã€‚

### åŠŸèƒ½ç‰¹è‰²

- âœ… å•†å“ä¸Šæ¶èˆ‡ç€è¦½
- âœ… Escrow æ‰˜ç®¡æ©Ÿåˆ¶
- âœ… ç¢ºèªæ”¶è²¨ / é€€æ¬¾æ©Ÿåˆ¶
- âœ… çˆ­è­°è™•ç†
- âœ… MetaMask éŒ¢åŒ…æ•´åˆ
- âœ… éŸ¿æ‡‰å¼ç¶²é è¨­è¨ˆ (RWD)

---

## ğŸ—ï¸ å°ˆæ¡ˆçµæ§‹

```
secondhand-marketplace/
â”‚
â”œâ”€â”€ README.md
â”‚
â”œâ”€â”€ contracts/                  # Solidity æ™ºèƒ½åˆç´„
â”‚   â”œâ”€â”€ Escrow.sol             # æ‰˜ç®¡åˆç´„
â”‚   â””â”€â”€ Marketplace.sol        # å¸‚å ´åˆç´„
â”‚
â””â”€â”€ frontend/                   # ç¶²é å‰ç«¯
    â”œâ”€â”€ index.html             # ä¸»é ï¼ˆå•†å“åˆ—è¡¨ + ä¸Šæ¶ï¼‰
    â”œâ”€â”€ product.html           # å•†å“è©³æƒ…é 
    â”œâ”€â”€ my-orders.html         # æˆ‘çš„è¨‚å–®é 
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ style.css          # æ¨£å¼è¡¨
    â””â”€â”€ js/
        â”œâ”€â”€ abi.js             # åˆç´„ ABI èˆ‡åœ°å€
        â””â”€â”€ app.js             # å‰ç«¯ä¸»ç¨‹å¼
```

---

## ğŸ”§ ç’°å¢ƒéœ€æ±‚

- [MetaMask](https://metamask.io/) ç€è¦½å™¨æ“´å……å¥—ä»¶
- [Remix IDE](https://remix.ethereum.org/) ç”¨æ–¼éƒ¨ç½²åˆç´„
- ç¾ä»£ç€è¦½å™¨ï¼ˆChromeã€Firefoxã€Edgeï¼‰
- VS Code + Live Serverï¼ˆç”¨æ–¼æœ¬åœ°æ¸¬è©¦ï¼‰

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. è¨­å®š MetaMask ç§æœ‰éˆ

åœ¨ MetaMask ä¸­æ–°å¢è‡ªè¨‚ç¶²è·¯ï¼š

| æ¬„ä½ | å€¼ |
|------|-----|
| ç¶²è·¯åç¨± | NYCU Private Chain |
| RPC URL | `http://your-rpc-url:8545` |
| Chain ID | `11330023` |
| è²¨å¹£ç¬¦è™Ÿ | ETH |

### 2. éƒ¨ç½²æ™ºèƒ½åˆç´„

1. é–‹å•Ÿ [Remix IDE](https://remix.ethereum.org/)
2. å»ºç«‹ `Escrow.sol` å’Œ `Marketplace.sol`
3. ç·¨è­¯åˆç´„ï¼ˆSolidity 0.8.xï¼‰
4. é¸æ“‡ **Injected Provider - MetaMask**
5. éƒ¨ç½² **Marketplace** åˆç´„
6. è¤‡è£½åˆç´„åœ°å€

### 3. è¨­å®šå‰ç«¯

ç·¨è¼¯ `frontend/js/abi.js`ï¼Œå¡«å…¥éƒ¨ç½²å¾Œçš„åˆç´„åœ°å€ï¼š

```javascript
const MARKETPLACE_ADDRESS = "0xä½ çš„åˆç´„åœ°å€";
```

### 4. å•Ÿå‹•å‰ç«¯

**æ–¹æ³•ä¸€ï¼šVS Code Live Server**
```
1. åœ¨ VS Code å®‰è£ Live Server æ“´å……å¥—ä»¶
2. å° index.html æŒ‰å³éµ â†’ Open with Live Server
```

**æ–¹æ³•äºŒï¼šPython HTTP Server**
```bash
cd frontend
python -m http.server 8080
# é–‹å•Ÿ http://localhost:8080
```

---

## ğŸ“– ä½¿ç”¨èªªæ˜
### MetaMaskéŒ¢åŒ…å®‰è£
- å…ˆå»Extensionä¸‹è¼‰
![alt text](images/image.png)
- å®Œæˆå¾Œé»é–‹ä¸¦ä¸”è¨­å®šå¯†ç¢¼
- é»é¸å·¦ä¸Šè§’æ–°å¢ç¶²è·¯
    - ![alt text](images/image-2.png)
    - ![alt text](images/image-3.png)
- å¡«å¯«RPC URL
    - ![alt text](images/image-1.png)
- å®Œæˆå¾Œå„²å­˜
    - ![alt text](images/image-4.png)

### å¦‚ä½•ç²å¾—åŸºç¤çš„éŒ¢é€²è¡Œæ¸¬è©¦ï¼Ÿ
- è¤‡è£½éŒ¢åŒ…çš„address
    - ![alt text](image.png)
- æŠŠéŒ¢è½‰åˆ°è‡ªå·±çš„éŒ¢åŒ…ä¸‹ã€‚
    ```bash
    eth.sendTransaction({from: eth.accounts[0], to: "0x60d8454EfB9a0E796Da51A52329C3B88EBF37aB9", value: web3.toWei(10, "ether")})
    ```
- è¨˜å¾—åœ¨å¾Œå°å•Ÿå‹•miner.start()å»æŠŠé€™ç­†ç´€éŒ„æŒ–å‡ºä¾†ã€‚ï¼ˆå»ºè­°æŒ–å®Œé¦¬ä¸Šé—œï¼Œä¸ç„¶å¾Œé¢é›£åº¦æœƒå¤ªé«˜ï¼ï¼‰
![alt text](images/image-5.png)
- æœ€å¾Œé»é¸å³ä¸Šè§’çš„é€£æ¥éŒ¢åŒ…å°±æœƒé€éä½ çš„extensionå•ä½ æ˜¯å¦è¦é€£æ¥éŒ¢åŒ…ï¼

### é¡å¤–æ–°å¢è²·å®¶é€²è¡Œæ¸¬è©¦ã€‚
- ![alt text](images/image-6.png)
- ![alt text](images/image-7.png)
- ![alt text](images/image-8.png)
### è³£å®¶æµç¨‹
1. é€£æ¥ MetaMask éŒ¢åŒ…
2. åœ¨é¦–é å¡«å¯«å•†å“è³‡è¨Šï¼ˆåç¨±ã€æè¿°ã€åƒ¹æ ¼ï¼‰
3. é»æ“Šã€Œä¸Šæ¶å•†å“ã€
4. ç¢ºèª MetaMask äº¤æ˜“
5. ç­‰å¾…è²·å®¶è³¼è²·
6. è²·å®¶ç¢ºèªæ”¶è²¨å¾Œæ”¶åˆ°æ¬¾é …

### è²·å®¶æµç¨‹

1. é€£æ¥ MetaMask éŒ¢åŒ…
2. ç€è¦½å•†å“åˆ—è¡¨
3. é»æ“Šã€ŒæŸ¥çœ‹è©³æƒ…ã€é¸æ“‡å•†å“
4. é»æ“Šã€Œè³¼è²·æ­¤å•†å“ã€
5. ç¢ºèª MetaMask äº¤æ˜“ï¼ˆä»˜æ¬¾ï¼‰
6. æ”¶åˆ°å•†å“å¾Œé»æ“Šã€Œç¢ºèªæ”¶è²¨ã€
7. è³‡é‡‘é‡‹æ”¾çµ¦è³£å®¶

### Escrow æ‰˜ç®¡ç‹€æ…‹

| ç‹€æ…‹ | èªªæ˜ |
|------|------|
| Created | å·²å»ºç«‹ï¼Œç­‰å¾…ä»˜æ¬¾ |
| Funded | å·²ä»˜æ¬¾ï¼Œè³‡é‡‘é–å®šä¸­ |
| Confirmed | è²·å®¶ç¢ºèªæ”¶è²¨ï¼Œäº¤æ˜“å®Œæˆ |
| Refunded | è³£å®¶åŒæ„é€€æ¬¾ |
| Disputed | è²·å®¶æå‡ºçˆ­è­° |

---

## ğŸ“ æ™ºèƒ½åˆç´„èªªæ˜

### Marketplace.sol

ä¸»è¦å¸‚å ´åˆç´„ï¼Œè² è²¬å•†å“ç®¡ç†ã€‚

**ä¸»è¦å‡½å¼ï¼š**

| å‡½å¼ | èªªæ˜ |
|------|------|
| `listProduct(name, description, price)` | ä¸Šæ¶å•†å“ |
| `purchaseProduct(productId)` | è³¼è²·å•†å“ |
| `cancelProduct(productId)` | å–æ¶ˆä¸Šæ¶ |
| `getAvailableProducts()` | å–å¾—æ‰€æœ‰å¯è³¼è²·å•†å“ |
| `getProduct(productId)` | å–å¾—å–®ä¸€å•†å“è³‡è¨Š |
| `getBuyerOrders(buyer)` | å–å¾—è²·å®¶è¨‚å–® |
| `getSellerProducts(seller)` | å–å¾—è³£å®¶å•†å“ |

### Escrow.sol

æ‰˜ç®¡åˆç´„ï¼Œæ¯æ¬¡è³¼è²·æ™‚è‡ªå‹•å»ºç«‹ã€‚

**ä¸»è¦å‡½å¼ï¼š**

| å‡½å¼ | èªªæ˜ |
|------|------|
| `fund()` | è²·å®¶ä»˜æ¬¾ |
| `confirmReceived()` | è²·å®¶ç¢ºèªæ”¶è²¨ |
| `refund()` | è³£å®¶åŒæ„é€€æ¬¾ |
| `raiseDispute()` | è²·å®¶æå‡ºçˆ­è­° |
| `getDetails()` | å–å¾—æ‰˜ç®¡è©³æƒ… |

---

## ğŸ” å®‰å…¨æ©Ÿåˆ¶

1. **è³‡é‡‘æ‰˜ç®¡**ï¼šè²·å®¶ä»˜æ¬¾å¾Œè³‡é‡‘é–å®šåœ¨ Escrow åˆç´„ä¸­
2. **èº«ä»½é©—è­‰**ï¼šåªæœ‰è²·å®¶èƒ½ç¢ºèªæ”¶è²¨ï¼Œåªæœ‰è³£å®¶èƒ½åŒæ„é€€æ¬¾
3. **ç‹€æ…‹æª¢æŸ¥**ï¼šæ¯å€‹æ“ä½œéƒ½æœ‰ç‹€æ…‹æª¢æŸ¥ï¼Œé˜²æ­¢é‡è¤‡åŸ·è¡Œ
4. **é˜²æ­¢è‡ªè²·**ï¼šè³£å®¶ç„¡æ³•è³¼è²·è‡ªå·±çš„å•†å“

---

## âš ï¸ æ³¨æ„äº‹é …

- æ­¤å°ˆæ¡ˆé‹è¡Œåœ¨ç§æœ‰éˆ Chain ID: **11330023**
- è«‹å‹¿å¾å…±ç”¨å¸³æˆ¶è½‰å‡ºå¤§é‡ ETHï¼ˆè¶…é 100 ETHï¼‰
- æ¸¬è©¦å‰è«‹ç¢ºèª MetaMask å·²é€£æ¥åˆ°æ­£ç¢ºçš„ç¶²è·¯
- åƒ¹æ ¼å–®ä½ç‚º ETHï¼Œåˆç´„å…§éƒ¨ä½¿ç”¨ Wei

---

## ğŸ› ï¸ æŠ€è¡“æ£§

**æ™ºèƒ½åˆç´„ï¼š**
- Solidity ^0.8.0
- Remix IDE

**å‰ç«¯ï¼š**
- HTML5 / CSS3
- JavaScript (ES6+)
- Web3.js 1.10.0

---

## ğŸ“„ æˆæ¬Šæ¢æ¬¾

MIT License

---
